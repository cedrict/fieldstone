#! /bin/bash

rm errors_*
rm vrms_* 
rm area_*
rm volume_*
rm u_err_*
rm v_err_*
rm p_err_*

for l in 4 8 12 16 20 24 32 40 48 56 64; do

   for nqperdim in 2 3 4 5; do

      for mapping in 1 2 3 4; do

          echo nelr= $l - nqperdim= $nqperdim - mapping= $mapping

          python3 stone.py $l 0 $nqperdim $mapping > opla  
          grep errv opla >> errors_${nqperdim}_${mapping} 
          grep vrms opla >> vrms_${nqperdim}_${mapping}
          grep area opla | grep meas >> area_${nqperdim}_${mapping}
          grep volume opla | grep meas >> volume_${nqperdim}_${mapping}
          grep u_err opla >> u_err_${nqperdim}_${mapping}
          grep v_err opla >> v_err_${nqperdim}_${mapping}
          grep p_err opla >> p_err_${nqperdim}_${mapping}
          grep errexx1 opla >> errors_sr1_${nqperdim}_${mapping}
          grep errexx2 opla >> errors_sr2_${nqperdim}_${mapping}
          grep errexx3 opla >> errors_sr3_${nqperdim}_${mapping}

      done
   done
done

rm opla

